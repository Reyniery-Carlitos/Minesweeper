(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const d of t)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function r(t){const d={};return t.integrity&&(d.integrity=t.integrity),t.referrerPolicy&&(d.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?d.credentials="include":t.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(t){if(t.ep)return;t.ep=!0;const d=r(t);fetch(t.href,d)}})();const s=document.querySelector("canvas"),E=document.getElementById("score"),O=document.getElementById("final-score"),m=document.getElementById("game-over");let u=0;const c=s.getContext("2d"),l=28,F=24,S=20;s.width=l*F;s.height=l*S;c.scale(l,l);const a=["green","orange","blue","violet","red","pink","black","yellow"],L=["#3948FF","#7239FF","#CC39FF","#FF39D8","#FF3978","#FF5739","#D9AE00","#FF1818"],M=["#3D1134","#25113D","#7D4000","#00097D","#46007D","#7B007D","#7D0031","#7D0000"];function x(n){return[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}let o=x();function D(n){for(let e=0;e<n;e++)o[Math.floor(Math.random()*o.length)][Math.floor(Math.random()*o[0].length)]=2}function f(n,e,r){c.fillStyle=n,c.fillRect(e,r,1,1)}function g(){b(),window.requestAnimationFrame(g)}function X(n,e){let r=0;const i=[{indexX:n-1,indexY:e},{indexX:n-1,indexY:e-1},{indexX:n-1,indexY:e+1},{indexX:n+1,indexY:e},{indexX:n+1,indexY:e-1},{indexX:n+1,indexY:e+1},{indexX:n,indexY:e+1},{indexX:n,indexY:e-1}];for(const t of i)t.indexX>=0&&t.indexX<o.length&&t.indexY>=0&&t.indexY<o[0].length&&(o[t.indexX][t.indexY]===2||o[t.indexX][t.indexY]===3)&&(r+=1);return r}function Y(n,e){const r=[{indexX:n-1,indexY:e},{indexX:n-1,indexY:e-1},{indexX:n-1,indexY:e+1},{indexX:n+1,indexY:e},{indexX:n+1,indexY:e-1},{indexX:n+1,indexY:e+1},{indexX:n,indexY:e+1},{indexX:n,indexY:e-1}];if(X(n,e)>0){o[n][e]=1,u+=5,E.innerText=u;return}for(const t of r)t.indexX>=0&&t.indexX<o.length&&t.indexY>=0&&t.indexY<o[0].length&&o[t.indexX][t.indexY]===0&&(o[n][e]=1,Y(t.indexX,t.indexY))}function I(){o.forEach((n,e)=>{n.forEach((r,i)=>{setTimeout(()=>{r===2&&(o[e][i]=3)},1e3)})})}s.addEventListener("mousedown",n=>{const e=n.clientX-s.offsetLeft,r=n.clientY-s.offsetTop,i=parseInt(Math.floor(e,l)/l),t=parseInt(Math.floor(r,l)/l);o[t][i]===2||o[t][i]===3?(o[t][i]=3,O.innerText=u,m.classList.toggle("modal-show"),I()):Y(t,i),g()});function b(){c.fillStyle="#000",c.fillRect(0,0,s.width,s.height),c.font="bold 0.7pt Arial",c.textBaseline="top",c.textAlign="start",o.forEach((n,e)=>{n.forEach((r,i)=>{const t=X(e,i);if(c.strokeStyle="#fff",e%2===0&i%2!==0|e%2!==0&i%2===0?r===1?(f("#d7b899",i,e),c.fillStyle=a[t-1],c.fillText(t.toString(),i+.2,e+.1)):f("#a2d149",i,e):r===1?(f("#e5c29f",i,e),c.fillStyle=a[t-1],c.fillText(t.toString(),i+.2,e+.1)):f("#aad751",i,e),r===3){const d=L[Math.floor(i*e%a.length)];f(d,i,e),c.fillStyle=M[Math.floor(i*e%a.length)],c.fillText("âŠ—",i+.1,e+.1)}})})}function p(){D(100),g()}document.getElementById("btn-restart").addEventListener("click",()=>{u=0,o=x(),m.classList.toggle("modal-show"),p()});p();
